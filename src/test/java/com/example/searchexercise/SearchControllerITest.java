package com.example.searchexercise;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.boot.test.web.client.TestRestTemplate;
import org.springframework.http.HttpEntity;
import org.springframework.http.HttpHeaders;
import org.springframework.http.MediaType;
import org.springframework.http.ResponseEntity;

import java.util.List;

import static org.assertj.core.api.Assertions.assertThat;

@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
public class SearchControllerITest {

    private static final String REQUEST_BODY_COMPANY_NUMBER = "{\"companyNumber\":\"06500244\"}";
    private static final String REQUEST_BODY_COMPANY_NAME = "{\"companyName\":\"bbc\"}";
    private static final String REQUEST_BODY_MISSING_SEARCH_TERM = "{}";

    private static final String EXPECTED_RESPONSE_JSON_FOR_COMPANY_NUMBER_SEARCH_TERM = "{\"total_results\":1,\"items\":[{\"company_number\":\"06500244\",\"company_type\":\"ltd\",\"title\":\"BBC LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2008-02-11\",\"address\":{\"locality\":\"Retford\",\"postal_code\":\"DN22 0AD\",\"premises\":null,\"address_line_1\":\"Boswell Cottage Main Street\",\"country\":\"England\"},\"officers\":[{\"name\":\"BOXALL, Sarah Victoria\",\"officer_role\":\"secretary\",\"appointed_on\":\"2008-02-11\",\"address\":{\"locality\":\"London\",\"postal_code\":\"SW20 0DP\",\"premises\":\"5\",\"address_line_1\":\"Cranford Close\",\"country\":\"England\"}},{\"name\":\"BRAY, Simon Anton\",\"officer_role\":\"director\",\"appointed_on\":\"2008-02-11\",\"address\":{\"locality\":\"London\",\"postal_code\":\"SW20 0DP\",\"premises\":\"5\",\"address_line_1\":\"Cranford Close\",\"country\":\"England\"}}]}]}";
    private static final String EXPECTED_RESPONSE_JSON_FOR_COMPANY_NAME_SEARCH_TERM_ACTIVE_ONLY_FALSE = "{\"total_results\":20,\"items\":[{\"company_number\":\"06500244\",\"company_type\":\"ltd\",\"title\":\"BBC LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2008-02-11\",\"address\":{\"locality\":\"Retford\",\"postal_code\":\"DN22 0AD\",\"premises\":null,\"address_line_1\":\"Boswell Cottage Main Street\",\"country\":\"England\"},\"officers\":[{\"name\":\"BOXALL, Sarah Victoria\",\"officer_role\":\"secretary\",\"appointed_on\":\"2008-02-11\",\"address\":{\"locality\":\"London\",\"postal_code\":\"SW20 0DP\",\"premises\":\"5\",\"address_line_1\":\"Cranford Close\",\"country\":\"England\"}},{\"name\":\"BRAY, Simon Anton\",\"officer_role\":\"director\",\"appointed_on\":\"2008-02-11\",\"address\":{\"locality\":\"London\",\"postal_code\":\"SW20 0DP\",\"premises\":\"5\",\"address_line_1\":\"Cranford Close\",\"country\":\"England\"}}]},{\"company_number\":\"12990923\",\"company_type\":\"ltd\",\"title\":\"BASEMENTS SOLUTIONS LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2020-11-02\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W5 2AR\",\"premises\":null,\"address_line_1\":\"52a Gordon Road\",\"country\":\"England\"},\"officers\":[{\"name\":\"SZELETZKI, Vanderlei\",\"officer_role\":\"director\",\"appointed_on\":\"2020-11-02\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W5 2AR\",\"premises\":\"52a\",\"address_line_1\":\"Gordon Road\",\"country\":\"England\"}}]},{\"company_number\":\"07520089\",\"company_type\":\"ltd\",\"title\":\"BBC AND CO LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2011-02-07\",\"address\":{\"locality\":\"Lostwithiel\",\"postal_code\":\"PL22 0HG\",\"premises\":\"Unit 2\",\"address_line_1\":\"Restormel Estate\",\"country\":null},\"officers\":[{\"name\":\"BATE, Philip Henry\",\"officer_role\":\"director\",\"appointed_on\":\"2011-02-07\",\"address\":{\"locality\":\"Lostwithiel\",\"postal_code\":\"PL22 0HG\",\"premises\":\"Unit 2\",\"address_line_1\":\"Restormel Estate\",\"country\":\"United Kingdom\"}}]},{\"company_number\":\"09670032\",\"company_type\":\"ltd\",\"title\":\"BBC AESTHETICS LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2015-07-03\",\"address\":{\"locality\":\"Liverpool\",\"postal_code\":\"L3 9NG\",\"premises\":null,\"address_line_1\":\"Suite 4 Second Floor Honeycomb\",\"country\":\"England\"},\"officers\":[{\"name\":\"LEWIS, Natasha Patricia\",\"officer_role\":\"director\",\"appointed_on\":\"2015-07-03\",\"address\":{\"locality\":\"Liverpool\",\"postal_code\":\"L3 9NG\",\"premises\":\"Suite 4 Second Floor\",\"address_line_1\":\"Honeycomb\",\"country\":\"England\"}}]},{\"company_number\":\"07215276\",\"company_type\":\"ltd\",\"title\":\"BBC APPLICATIONS LIMITED\",\"company_status\":\"dissolved\",\"date_of_creation\":\"2010-04-07\",\"address\":{\"locality\":\"Bingley\",\"postal_code\":\"BD16 2RX\",\"premises\":\"2\",\"address_line_1\":\"Longwood Hall\",\"country\":\"England\"},\"officers\":[{\"name\":\"HALAY, Howerd\",\"officer_role\":\"secretary\",\"appointed_on\":\"2010-04-07\",\"address\":{\"locality\":\"Bingley\",\"postal_code\":\"BD16 2RX\",\"premises\":\"2\",\"address_line_1\":\"Longwood Hall\",\"country\":\"United Kingdom\"}},{\"name\":\"HALAY, Howerd\",\"officer_role\":\"director\",\"appointed_on\":\"2010-04-07\",\"address\":{\"locality\":\"Bingley\",\"postal_code\":\"BD16 2RX\",\"premises\":\"2\",\"address_line_1\":\"Longwood Hall\",\"country\":\"United Kingdom\"}}]},{\"company_number\":\"01481686\",\"company_type\":\"ltd\",\"title\":\"B.B.C. BATHROOMS LIMITED\",\"company_status\":\"liquidation\",\"date_of_creation\":\"1980-02-27\",\"address\":{\"locality\":null,\"postal_code\":\"N15 6HT\",\"premises\":\"602/604 \",\"address_line_1\":\"Seven Sisters Road\",\"country\":null},\"officers\":[]},{\"company_number\":\"04543129\",\"company_type\":\"ltd\",\"title\":\"B.B.C (BIG BEN CONSULTING) GROUP LTD\",\"company_status\":\"dissolved\",\"date_of_creation\":\"2002-09-24\",\"address\":{\"locality\":\"London\",\"postal_code\":\"SE19 3RW\",\"premises\":\"67\",\"address_line_1\":\"Westow Street\",\"country\":null},\"officers\":[{\"name\":\"MARINENKO, Maxim\",\"officer_role\":\"director\",\"appointed_on\":\"2002-09-24\",\"address\":{\"locality\":\"London\",\"postal_code\":\"SE19 3RW\",\"premises\":null,\"address_line_1\":\"67 Westow Street\",\"country\":null}}]},{\"company_number\":\"14006528\",\"company_type\":\"ltd\",\"title\":\"BBC - BLESSING BEAUTY COSMETICS LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2022-03-28\",\"address\":{\"locality\":\"London\",\"postal_code\":\"N9 9QR\",\"premises\":\"23\",\"address_line_1\":\"West Close\",\"country\":\"England\"},\"officers\":[{\"name\":\"ADEBANJO, Blessing Bunmi\",\"officer_role\":\"director\",\"appointed_on\":\"2022-03-28\",\"address\":{\"locality\":\"London\",\"postal_code\":\"N9 9QR\",\"premises\":\"23\",\"address_line_1\":\"West Close\",\"country\":\"England\"}},{\"name\":\"ADEDIBU, Danniella Bolade\",\"officer_role\":\"director\",\"appointed_on\":\"2022-03-28\",\"address\":{\"locality\":\"London\",\"postal_code\":\"N9 9QR\",\"premises\":\"23\",\"address_line_1\":\"West Close\",\"country\":\"England\"}}]},{\"company_number\":\"07201733\",\"company_type\":\"private-limited-guarant-nsc\",\"title\":\"BBC (BRISTOL) CLUB LIMITED\",\"company_status\":\"dissolved\",\"date_of_creation\":\"2010-03-24\",\"address\":{\"locality\":\"Bristol\",\"postal_code\":\"BS1 3AG\",\"premises\":\"C/O Begbies Traynor, 3rd Floor Castlemead\",\"address_line_1\":\"Lower Castle Street\",\"country\":null},\"officers\":[{\"name\":\"HAYNES, Andrew John\",\"officer_role\":\"secretary\",\"appointed_on\":\"2010-03-24\",\"address\":{\"locality\":\"Bristol\",\"postal_code\":\"BS8 2LR\",\"premises\":\"Bbc Broadcasting House\",\"address_line_1\":\"Whiteladies Road\",\"country\":null}},{\"name\":\"BANWELL, Timothy James\",\"officer_role\":\"director\",\"appointed_on\":\"2010-03-24\",\"address\":{\"locality\":\"Bristol\",\"postal_code\":\"BS8 2LR\",\"premises\":\"Bbc Broadcasting House\",\"address_line_1\":\"Whiteladies Road\",\"country\":null}},{\"name\":\"CHANEY, Yseult Kate Serena\",\"officer_role\":\"director\",\"appointed_on\":\"2010-03-24\",\"address\":{\"locality\":\"Bristol\",\"postal_code\":\"BS8 2LR\",\"premises\":\"Bbc Broadcasting House\",\"address_line_1\":\"Whiteladies Road\",\"country\":null}},{\"name\":\"GUNTON, Michael De La Roche, Dr\",\"officer_role\":\"director\",\"appointed_on\":\"2010-03-24\",\"address\":{\"locality\":\"Bristol\",\"postal_code\":\"BS8 2LR\",\"premises\":\"Bbc Broadcasting House\",\"address_line_1\":\"Whiteladies Road\",\"country\":null}},{\"name\":\"HAYNES, Andrew John\",\"officer_role\":\"director\",\"appointed_on\":\"2010-03-24\",\"address\":{\"locality\":\"Bristol\",\"postal_code\":\"BS8 2LR\",\"premises\":\"Bbc Broadcasting House\",\"address_line_1\":\"Whiteladies Road\",\"country\":null}}]},{\"company_number\":\"11811163\",\"company_type\":\"ltd\",\"title\":\"BBC CARE SERVICE LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2019-02-06\",\"address\":{\"locality\":\"Chertsey\",\"postal_code\":\"KT16 0RS\",\"premises\":null,\"address_line_1\":\"3000 Hillswood Drive\",\"country\":\"England\"},\"officers\":[{\"name\":\"KABALI, Milley\",\"officer_role\":\"director\",\"appointed_on\":\"2019-02-06\",\"address\":{\"locality\":\"Chertsey\",\"postal_code\":\"KT16 0RS\",\"premises\":\"3000\",\"address_line_1\":\"Hillswood Drive\",\"country\":\"England\"}}]},{\"company_number\":\"12800068\",\"company_type\":\"ltd\",\"title\":\"BBC CATERING LTD\",\"company_status\":\"active\",\"date_of_creation\":\"2020-08-07\",\"address\":{\"locality\":\"Blackburn\",\"postal_code\":\"BB2 2AN\",\"premises\":null,\"address_line_1\":\"Unit C\",\"country\":\"United Kingdom\"},\"officers\":[{\"name\":\"RIAZ, Umair\",\"officer_role\":\"director\",\"appointed_on\":\"2023-07-01\",\"address\":{\"locality\":\"Blackburn\",\"postal_code\":\"BB2 2AN\",\"premises\":\"Unit C\",\"address_line_1\":\"Weir St\",\"country\":\"United Kingdom\"}}]},{\"company_number\":\"04723022\",\"company_type\":\"private-limited-guarant-nsc-limited-exemption\",\"title\":\"BBC CHILDREN IN NEED\",\"company_status\":\"active\",\"date_of_creation\":\"2003-04-04\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th\",\"address_line_1\":\"Floor Dock House\",\"country\":\"England\"},\"officers\":[{\"name\":\"OKOTIE, Anthony\",\"officer_role\":\"secretary\",\"appointed_on\":\"2020-12-01\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"BIJA, Cherrie Michelle\",\"officer_role\":\"director\",\"appointed_on\":\"2022-05-11\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"BRADLEY, Trevor Bryan\",\"officer_role\":\"director\",\"appointed_on\":\"2019-06-26\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"BRYAN, Randel\",\"officer_role\":\"director\",\"appointed_on\":\"2022-01-17\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"BURNS, Rhona Ann\",\"officer_role\":\"director\",\"appointed_on\":\"2020-05-02\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"CLIFTON, Kieran Oliver Edward\",\"officer_role\":\"director\",\"appointed_on\":\"2019-10-15\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"FAIRCLOUGH, James\",\"officer_role\":\"director\",\"appointed_on\":\"2021-10-01\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"HIDALGO, Patricia Reina\",\"officer_role\":\"director\",\"appointed_on\":\"2024-03-01\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"IMAFIDON, Kenny\",\"officer_role\":\"director\",\"appointed_on\":\"2019-04-30\",\"address\":{\"locality\":\"Salford\",\"postal_code\":\"M50 2BH\",\"premises\":\"Bridge House\",\"address_line_1\":\"Media City Uk\",\"country\":\"England\"}},{\"name\":\"LAMB, Suzanne\",\"officer_role\":\"director\",\"appointed_on\":\"2020-12-01\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"MUNRO, Jonathan Charles\",\"officer_role\":\"director\",\"appointed_on\":\"2020-05-02\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"TAVAZIVA, Leigh\",\"officer_role\":\"director\",\"appointed_on\":\"2022-10-01\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"THOMAS, Helen Mariam\",\"officer_role\":\"director\",\"appointed_on\":\"2024-03-01\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"WALLACE, Jo\",\"officer_role\":\"director\",\"appointed_on\":\"2023-10-19\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}}]},{\"company_number\":\"09905558\",\"company_type\":\"ltd\",\"title\":\"BBC CHILDREN'S PRODUCTIONS LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2015-12-07\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":null,\"address_line_1\":\"1 Television Centre\",\"country\":\"England\"},\"officers\":[{\"name\":\"CORRIETTE, Anthony\",\"officer_role\":\"secretary\",\"appointed_on\":\"2024-09-26\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1 Television Centre\",\"address_line_1\":\"101 Wood Lane\",\"country\":\"United Kingdom\"}},{\"name\":\"ESCOTT, Sarah\",\"officer_role\":\"director\",\"appointed_on\":\"2024-03-28\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1 Television Centre\",\"address_line_1\":\"Wood Lane\",\"country\":\"England\"}},{\"name\":\"MILLS, Jonathan Charles\",\"officer_role\":\"director\",\"appointed_on\":\"2023-02-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1 Television Centre\",\"address_line_1\":\"Wood Lane\",\"country\":\"England\"}},{\"name\":\"PERSSON, Cecilia Inger\",\"officer_role\":\"director\",\"appointed_on\":\"2022-04-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1 Television Centre\",\"address_line_1\":\"Wood Lane\",\"country\":\"England\"}}]},{\"company_number\":\"13719086\",\"company_type\":\"ltd\",\"title\":\"BBC CHILDRENS RIVERSIDE LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2021-11-02\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":null,\"address_line_1\":\"Broadcasting House\",\"country\":\"England\"},\"officers\":[{\"name\":\"RANYARD, Peter John\",\"officer_role\":\"secretary\",\"appointed_on\":\"2021-11-26\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"C/O Bbc Legal\",\"address_line_1\":\"Broadcast House\",\"country\":\"United Kingdom\"}},{\"name\":\"MACDONALD, Una\",\"officer_role\":\"director\",\"appointed_on\":\"2024-10-09\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"Broadcasting House\",\"address_line_1\":\"Portland Place\",\"country\":\"England\"}},{\"name\":\"MITCHELL, Charmaine Helen\",\"officer_role\":\"director\",\"appointed_on\":\"2024-06-21\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"Broadcasting House\",\"address_line_1\":\"Portland Place\",\"country\":\"England\"}},{\"name\":\"RANYARD, Peter John\",\"officer_role\":\"director\",\"appointed_on\":\"2021-11-26\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"Bbc New Broadcasting House\",\"address_line_1\":\"Portland Place\",\"country\":\"United Kingdom\"}},{\"name\":\"SING, Samantha Geraldine\",\"officer_role\":\"director\",\"appointed_on\":\"2024-06-21\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"Broadcasting House\",\"address_line_1\":\"Portland Place\",\"country\":\"England\"}}]},{\"company_number\":\"07211699\",\"company_type\":\"private-limited-guarant-nsc\",\"title\":\"BBC CLUB SPORTS AND LEISURE LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2010-04-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"London Broadcasting House Bbc Club Sports And Leisure Ltd\",\"address_line_1\":\"Portland Place\",\"country\":\"England\"},\"officers\":[{\"name\":\"CARTER, Gill\",\"officer_role\":\"director\",\"appointed_on\":\"2017-01-12\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"London Broadcasting House\",\"address_line_1\":\"Bbc Club Sports And Leisure Ltd\",\"country\":\"England\"}},{\"name\":\"COOK, Ross Howard\",\"officer_role\":\"director\",\"appointed_on\":\"2014-11-06\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"London Broadcasting House\",\"address_line_1\":\"Bbc Club Sports And Leisure Ltd\",\"country\":\"England\"}},{\"name\":\"JORDAN, David James\",\"officer_role\":\"director\",\"appointed_on\":\"2010-12-15\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"London Broadcasting House\",\"address_line_1\":\"Bbc Club Sports And Leisure Ltd\",\"country\":\"England\"}},{\"name\":\"KIDD, Andrea Violet\",\"officer_role\":\"director\",\"appointed_on\":\"2015-03-24\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"Wogan House\",\"address_line_1\":\"Bbc Club Wogan House\",\"country\":\"United Kingdom\"}},{\"name\":\"MOUCHTEREM, Achmet\",\"officer_role\":\"director\",\"appointed_on\":\"2014-03-05\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"London Broadcasting House\",\"address_line_1\":\"Bbc Club Sports And Leisure Ltd\",\"country\":\"England\"}},{\"name\":\"WINFIELD, John\",\"officer_role\":\"director\",\"appointed_on\":\"2010-04-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"London Broadcasting House\",\"address_line_1\":\"Bbc Club Sports And Leisure Ltd\",\"country\":\"England\"}}]},{\"company_number\":\"13005466\",\"company_type\":\"ltd\",\"title\":\"BBC COFFEE LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2020-11-09\",\"address\":{\"locality\":\"Southampton\",\"postal_code\":\"SO16 0BT\",\"premises\":null,\"address_line_1\":\"Adanac Business Park, Adanac North, Unit E3 & E4,\",\"country\":\"United Kingdom\"},\"officers\":[{\"name\":\"BODIAM, Kane Ronald Vasudevan\",\"officer_role\":\"director\",\"appointed_on\":\"2022-02-20\",\"address\":{\"locality\":\"Southampton\",\"postal_code\":\"SO16 0BT\",\"premises\":\"Adanac Business Park,\",\"address_line_1\":\"Adanac North, Unit E3 & E4,\",\"country\":\"United Kingdom\"}},{\"name\":\"GOLDKORN, Benjamin John, Director\",\"officer_role\":\"director\",\"appointed_on\":\"2021-01-01\",\"address\":{\"locality\":\"Southampton\",\"postal_code\":\"SO16 0BT\",\"premises\":\"Adanac Business Park,\",\"address_line_1\":\"Adanac North, Unit E3 & E4,\",\"country\":\"United Kingdom\"}},{\"name\":\"KOCHHAR, Dhruv Neeraj\",\"officer_role\":\"director\",\"appointed_on\":\"2020-11-09\",\"address\":{\"locality\":\"Southampton\",\"postal_code\":\"SO16 0BT\",\"premises\":\"Adanac Business Park,\",\"address_line_1\":\"Adanac North, Unit E3 & E4,\",\"country\":\"United Kingdom\"}}]},{\"company_number\":\"09158624\",\"company_type\":\"ltd\",\"title\":\"BBC COMEDY PRODUCTIONS LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2014-08-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":null,\"address_line_1\":\"1 Television Centre\",\"country\":\"United Kingdom\"},\"officers\":[{\"name\":\"CORRIETTE, Anthony\",\"officer_role\":\"secretary\",\"appointed_on\":\"2024-09-26\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1 Television Centre\",\"address_line_1\":\"101 Wood Lane\",\"country\":\"United Kingdom\"}},{\"name\":\"ESCOTT, Sarah\",\"officer_role\":\"director\",\"appointed_on\":\"2024-03-28\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1 Television Centre\",\"address_line_1\":\"101 Wood Lane\",\"country\":\"United Kingdom\"}},{\"name\":\"MELLORS, Holly\",\"officer_role\":\"director\",\"appointed_on\":\"2023-02-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1 Television Centre\",\"address_line_1\":\"101 Wood Lane\",\"country\":\"United Kingdom\"}}]},{\"company_number\":\"04463534\",\"company_type\":\"ltd\",\"title\":\"BBC COMMERCIAL LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2002-06-18\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":null,\"address_line_1\":\"1 Television Centre\",\"country\":\"United Kingdom\"},\"officers\":[{\"name\":\"CORRIETTE, Anthony\",\"officer_role\":\"secretary\",\"appointed_on\":\"2022-04-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1 Television Centre\",\"address_line_1\":\"101 Wood Lane\",\"country\":\"United Kingdom\"}},{\"name\":\"BHOW, Gunjan Dhanesh\",\"officer_role\":\"director\",\"appointed_on\":\"2022-04-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1\",\"address_line_1\":\"Television Centre\",\"country\":\"United Kingdom\"}},{\"name\":\"BUFFINI, Damon Marcus, Sir\",\"officer_role\":\"director\",\"appointed_on\":\"2022-04-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1\",\"address_line_1\":\"Television Centre\",\"country\":\"United Kingdom\"}},{\"name\":\"FUSSELL, Thomas Cyrus\",\"officer_role\":\"director\",\"appointed_on\":\"2017-09-18\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1 Television Centre\",\"address_line_1\":\"101 Wood Lane\",\"country\":\"United Kingdom\"}},{\"name\":\"FYFIELD, Rowenna Mai\",\"officer_role\":\"director\",\"appointed_on\":\"2019-07-18\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1\",\"address_line_1\":\"Television Centre\",\"country\":\"United Kingdom\"}},{\"name\":\"GRIFFITHS, Ian Ward\",\"officer_role\":\"director\",\"appointed_on\":\"2023-04-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1\",\"address_line_1\":\"Television Centre\",\"country\":\"United Kingdom\"}},{\"name\":\"HUNGATE, Claire\",\"officer_role\":\"director\",\"appointed_on\":\"2023-04-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1\",\"address_line_1\":\"Television Centre\",\"country\":\"United Kingdom\"}},{\"name\":\"NEWMAN, Gary Stephen\",\"officer_role\":\"director\",\"appointed_on\":\"2023-04-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1\",\"address_line_1\":\"Television Centre\",\"country\":\"United Kingdom\"}},{\"name\":\"SINGH, Bhavneet\",\"officer_role\":\"director\",\"appointed_on\":\"2022-04-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1\",\"address_line_1\":\"Television Centre\",\"country\":\"United Kingdom\"}},{\"name\":\"SOLDI, Marinella\",\"officer_role\":\"director\",\"appointed_on\":\"2024-09-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1\",\"address_line_1\":\"Television Centre\",\"country\":\"United Kingdom\"}},{\"name\":\"TAVAZIVA, Anne Leigh\",\"officer_role\":\"director\",\"appointed_on\":\"2021-03-25\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1\",\"address_line_1\":\"Television Centre\",\"country\":\"United Kingdom\"}}]},{\"company_number\":\"13637184\",\"company_type\":\"ltd\",\"title\":\"BBC CONCRETE PRODUCTS LTD\",\"company_status\":\"active\",\"date_of_creation\":\"2021-09-22\",\"address\":{\"locality\":\"Dewsbury\",\"postal_code\":\"WF12 9QB\",\"premises\":null,\"address_line_1\":\"Cartwright Mill\",\"country\":\"England\"},\"officers\":[{\"name\":\"HAFEEZ, Abdul\",\"officer_role\":\"director\",\"appointed_on\":\"2021-09-22\",\"address\":{\"locality\":\"Dewsbury\",\"postal_code\":\"WF12 9QB\",\"premises\":\"Cartwright Mill\",\"address_line_1\":\"Watergate Road\",\"country\":\"England\"}}]},{\"company_number\":\"13903907\",\"company_type\":\"ltd\",\"title\":\"BBC CONSERVATOIRE OF MUSIC & MATHEMATICS LTD\",\"company_status\":\"dissolved\",\"date_of_creation\":\"2022-02-09\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W11 3JE\",\"premises\":null,\"address_line_1\":\"22 Notting Hill Gate\",\"country\":\"United Kingdom\"},\"officers\":[{\"name\":\"DEAL CHAMBERS LTD\",\"officer_role\":\"corporate-secretary\",\"appointed_on\":\"2022-02-09\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W11 3JE\",\"premises\":\"22\",\"address_line_1\":\"Notting Hill Gate\",\"country\":\"United Kingdom\"}},{\"name\":\"TAYLOR, Beth, Dr\",\"officer_role\":\"director\",\"appointed_on\":\"2022-02-09\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W11 3JE\",\"premises\":\"22\",\"address_line_1\":\"Notting Hill Gate\",\"country\":\"United Kingdom\"}}]}]}";
    private static final String EXPECTED_RESPONSE_JSON_FOR_COMPANY_NAME_SEARCH_TERM_ACTIVE_ONLY_TRUE = "{\"total_results\":15,\"items\":[{\"company_number\":\"06500244\",\"company_type\":\"ltd\",\"title\":\"BBC LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2008-02-11\",\"address\":{\"locality\":\"Retford\",\"postal_code\":\"DN22 0AD\",\"premises\":null,\"address_line_1\":\"Boswell Cottage Main Street\",\"country\":\"England\"},\"officers\":[{\"name\":\"BOXALL, Sarah Victoria\",\"officer_role\":\"secretary\",\"appointed_on\":\"2008-02-11\",\"address\":{\"locality\":\"London\",\"postal_code\":\"SW20 0DP\",\"premises\":\"5\",\"address_line_1\":\"Cranford Close\",\"country\":\"England\"}},{\"name\":\"BRAY, Simon Anton\",\"officer_role\":\"director\",\"appointed_on\":\"2008-02-11\",\"address\":{\"locality\":\"London\",\"postal_code\":\"SW20 0DP\",\"premises\":\"5\",\"address_line_1\":\"Cranford Close\",\"country\":\"England\"}}]},{\"company_number\":\"12990923\",\"company_type\":\"ltd\",\"title\":\"BASEMENTS SOLUTIONS LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2020-11-02\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W5 2AR\",\"premises\":null,\"address_line_1\":\"52a Gordon Road\",\"country\":\"England\"},\"officers\":[{\"name\":\"SZELETZKI, Vanderlei\",\"officer_role\":\"director\",\"appointed_on\":\"2020-11-02\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W5 2AR\",\"premises\":\"52a\",\"address_line_1\":\"Gordon Road\",\"country\":\"England\"}}]},{\"company_number\":\"07520089\",\"company_type\":\"ltd\",\"title\":\"BBC AND CO LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2011-02-07\",\"address\":{\"locality\":\"Lostwithiel\",\"postal_code\":\"PL22 0HG\",\"premises\":\"Unit 2\",\"address_line_1\":\"Restormel Estate\",\"country\":null},\"officers\":[{\"name\":\"BATE, Philip Henry\",\"officer_role\":\"director\",\"appointed_on\":\"2011-02-07\",\"address\":{\"locality\":\"Lostwithiel\",\"postal_code\":\"PL22 0HG\",\"premises\":\"Unit 2\",\"address_line_1\":\"Restormel Estate\",\"country\":\"United Kingdom\"}}]},{\"company_number\":\"09670032\",\"company_type\":\"ltd\",\"title\":\"BBC AESTHETICS LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2015-07-03\",\"address\":{\"locality\":\"Liverpool\",\"postal_code\":\"L3 9NG\",\"premises\":null,\"address_line_1\":\"Suite 4 Second Floor Honeycomb\",\"country\":\"England\"},\"officers\":[{\"name\":\"LEWIS, Natasha Patricia\",\"officer_role\":\"director\",\"appointed_on\":\"2015-07-03\",\"address\":{\"locality\":\"Liverpool\",\"postal_code\":\"L3 9NG\",\"premises\":\"Suite 4 Second Floor\",\"address_line_1\":\"Honeycomb\",\"country\":\"England\"}}]},{\"company_number\":\"14006528\",\"company_type\":\"ltd\",\"title\":\"BBC - BLESSING BEAUTY COSMETICS LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2022-03-28\",\"address\":{\"locality\":\"London\",\"postal_code\":\"N9 9QR\",\"premises\":\"23\",\"address_line_1\":\"West Close\",\"country\":\"England\"},\"officers\":[{\"name\":\"ADEBANJO, Blessing Bunmi\",\"officer_role\":\"director\",\"appointed_on\":\"2022-03-28\",\"address\":{\"locality\":\"London\",\"postal_code\":\"N9 9QR\",\"premises\":\"23\",\"address_line_1\":\"West Close\",\"country\":\"England\"}},{\"name\":\"ADEDIBU, Danniella Bolade\",\"officer_role\":\"director\",\"appointed_on\":\"2022-03-28\",\"address\":{\"locality\":\"London\",\"postal_code\":\"N9 9QR\",\"premises\":\"23\",\"address_line_1\":\"West Close\",\"country\":\"England\"}}]},{\"company_number\":\"11811163\",\"company_type\":\"ltd\",\"title\":\"BBC CARE SERVICE LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2019-02-06\",\"address\":{\"locality\":\"Chertsey\",\"postal_code\":\"KT16 0RS\",\"premises\":null,\"address_line_1\":\"3000 Hillswood Drive\",\"country\":\"England\"},\"officers\":[{\"name\":\"KABALI, Milley\",\"officer_role\":\"director\",\"appointed_on\":\"2019-02-06\",\"address\":{\"locality\":\"Chertsey\",\"postal_code\":\"KT16 0RS\",\"premises\":\"3000\",\"address_line_1\":\"Hillswood Drive\",\"country\":\"England\"}}]},{\"company_number\":\"12800068\",\"company_type\":\"ltd\",\"title\":\"BBC CATERING LTD\",\"company_status\":\"active\",\"date_of_creation\":\"2020-08-07\",\"address\":{\"locality\":\"Blackburn\",\"postal_code\":\"BB2 2AN\",\"premises\":null,\"address_line_1\":\"Unit C\",\"country\":\"United Kingdom\"},\"officers\":[{\"name\":\"RIAZ, Umair\",\"officer_role\":\"director\",\"appointed_on\":\"2023-07-01\",\"address\":{\"locality\":\"Blackburn\",\"postal_code\":\"BB2 2AN\",\"premises\":\"Unit C\",\"address_line_1\":\"Weir St\",\"country\":\"United Kingdom\"}}]},{\"company_number\":\"04723022\",\"company_type\":\"private-limited-guarant-nsc-limited-exemption\",\"title\":\"BBC CHILDREN IN NEED\",\"company_status\":\"active\",\"date_of_creation\":\"2003-04-04\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th\",\"address_line_1\":\"Floor Dock House\",\"country\":\"England\"},\"officers\":[{\"name\":\"OKOTIE, Anthony\",\"officer_role\":\"secretary\",\"appointed_on\":\"2020-12-01\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"BIJA, Cherrie Michelle\",\"officer_role\":\"director\",\"appointed_on\":\"2022-05-11\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"BRADLEY, Trevor Bryan\",\"officer_role\":\"director\",\"appointed_on\":\"2019-06-26\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"BRYAN, Randel\",\"officer_role\":\"director\",\"appointed_on\":\"2022-01-17\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"BURNS, Rhona Ann\",\"officer_role\":\"director\",\"appointed_on\":\"2020-05-02\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"CLIFTON, Kieran Oliver Edward\",\"officer_role\":\"director\",\"appointed_on\":\"2019-10-15\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"FAIRCLOUGH, James\",\"officer_role\":\"director\",\"appointed_on\":\"2021-10-01\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"HIDALGO, Patricia Reina\",\"officer_role\":\"director\",\"appointed_on\":\"2024-03-01\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"IMAFIDON, Kenny\",\"officer_role\":\"director\",\"appointed_on\":\"2019-04-30\",\"address\":{\"locality\":\"Salford\",\"postal_code\":\"M50 2BH\",\"premises\":\"Bridge House\",\"address_line_1\":\"Media City Uk\",\"country\":\"England\"}},{\"name\":\"LAMB, Suzanne\",\"officer_role\":\"director\",\"appointed_on\":\"2020-12-01\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"MUNRO, Jonathan Charles\",\"officer_role\":\"director\",\"appointed_on\":\"2020-05-02\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"TAVAZIVA, Leigh\",\"officer_role\":\"director\",\"appointed_on\":\"2022-10-01\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"THOMAS, Helen Mariam\",\"officer_role\":\"director\",\"appointed_on\":\"2024-03-01\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}},{\"name\":\"WALLACE, Jo\",\"officer_role\":\"director\",\"appointed_on\":\"2023-10-19\",\"address\":{\"locality\":\"Mediacity Uk\",\"postal_code\":\"M50 2LH\",\"premises\":\"4th Floor Dock House\",\"address_line_1\":\"4th Floor Dock House\",\"country\":\"England\"}}]},{\"company_number\":\"09905558\",\"company_type\":\"ltd\",\"title\":\"BBC CHILDREN'S PRODUCTIONS LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2015-12-07\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":null,\"address_line_1\":\"1 Television Centre\",\"country\":\"England\"},\"officers\":[{\"name\":\"CORRIETTE, Anthony\",\"officer_role\":\"secretary\",\"appointed_on\":\"2024-09-26\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1 Television Centre\",\"address_line_1\":\"101 Wood Lane\",\"country\":\"United Kingdom\"}},{\"name\":\"ESCOTT, Sarah\",\"officer_role\":\"director\",\"appointed_on\":\"2024-03-28\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1 Television Centre\",\"address_line_1\":\"Wood Lane\",\"country\":\"England\"}},{\"name\":\"MILLS, Jonathan Charles\",\"officer_role\":\"director\",\"appointed_on\":\"2023-02-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1 Television Centre\",\"address_line_1\":\"Wood Lane\",\"country\":\"England\"}},{\"name\":\"PERSSON, Cecilia Inger\",\"officer_role\":\"director\",\"appointed_on\":\"2022-04-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1 Television Centre\",\"address_line_1\":\"Wood Lane\",\"country\":\"England\"}}]},{\"company_number\":\"13719086\",\"company_type\":\"ltd\",\"title\":\"BBC CHILDRENS RIVERSIDE LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2021-11-02\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":null,\"address_line_1\":\"Broadcasting House\",\"country\":\"England\"},\"officers\":[{\"name\":\"RANYARD, Peter John\",\"officer_role\":\"secretary\",\"appointed_on\":\"2021-11-26\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"C/O Bbc Legal\",\"address_line_1\":\"Broadcast House\",\"country\":\"United Kingdom\"}},{\"name\":\"MACDONALD, Una\",\"officer_role\":\"director\",\"appointed_on\":\"2024-10-09\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"Broadcasting House\",\"address_line_1\":\"Portland Place\",\"country\":\"England\"}},{\"name\":\"MITCHELL, Charmaine Helen\",\"officer_role\":\"director\",\"appointed_on\":\"2024-06-21\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"Broadcasting House\",\"address_line_1\":\"Portland Place\",\"country\":\"England\"}},{\"name\":\"RANYARD, Peter John\",\"officer_role\":\"director\",\"appointed_on\":\"2021-11-26\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"Bbc New Broadcasting House\",\"address_line_1\":\"Portland Place\",\"country\":\"United Kingdom\"}},{\"name\":\"SING, Samantha Geraldine\",\"officer_role\":\"director\",\"appointed_on\":\"2024-06-21\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"Broadcasting House\",\"address_line_1\":\"Portland Place\",\"country\":\"England\"}}]},{\"company_number\":\"07211699\",\"company_type\":\"private-limited-guarant-nsc\",\"title\":\"BBC CLUB SPORTS AND LEISURE LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2010-04-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"London Broadcasting House Bbc Club Sports And Leisure Ltd\",\"address_line_1\":\"Portland Place\",\"country\":\"England\"},\"officers\":[{\"name\":\"CARTER, Gill\",\"officer_role\":\"director\",\"appointed_on\":\"2017-01-12\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"London Broadcasting House\",\"address_line_1\":\"Bbc Club Sports And Leisure Ltd\",\"country\":\"England\"}},{\"name\":\"COOK, Ross Howard\",\"officer_role\":\"director\",\"appointed_on\":\"2014-11-06\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"London Broadcasting House\",\"address_line_1\":\"Bbc Club Sports And Leisure Ltd\",\"country\":\"England\"}},{\"name\":\"JORDAN, David James\",\"officer_role\":\"director\",\"appointed_on\":\"2010-12-15\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"London Broadcasting House\",\"address_line_1\":\"Bbc Club Sports And Leisure Ltd\",\"country\":\"England\"}},{\"name\":\"KIDD, Andrea Violet\",\"officer_role\":\"director\",\"appointed_on\":\"2015-03-24\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"Wogan House\",\"address_line_1\":\"Bbc Club Wogan House\",\"country\":\"United Kingdom\"}},{\"name\":\"MOUCHTEREM, Achmet\",\"officer_role\":\"director\",\"appointed_on\":\"2014-03-05\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"London Broadcasting House\",\"address_line_1\":\"Bbc Club Sports And Leisure Ltd\",\"country\":\"England\"}},{\"name\":\"WINFIELD, John\",\"officer_role\":\"director\",\"appointed_on\":\"2010-04-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W1A 1AA\",\"premises\":\"London Broadcasting House\",\"address_line_1\":\"Bbc Club Sports And Leisure Ltd\",\"country\":\"England\"}}]},{\"company_number\":\"13005466\",\"company_type\":\"ltd\",\"title\":\"BBC COFFEE LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2020-11-09\",\"address\":{\"locality\":\"Southampton\",\"postal_code\":\"SO16 0BT\",\"premises\":null,\"address_line_1\":\"Adanac Business Park, Adanac North, Unit E3 & E4,\",\"country\":\"United Kingdom\"},\"officers\":[{\"name\":\"BODIAM, Kane Ronald Vasudevan\",\"officer_role\":\"director\",\"appointed_on\":\"2022-02-20\",\"address\":{\"locality\":\"Southampton\",\"postal_code\":\"SO16 0BT\",\"premises\":\"Adanac Business Park,\",\"address_line_1\":\"Adanac North, Unit E3 & E4,\",\"country\":\"United Kingdom\"}},{\"name\":\"GOLDKORN, Benjamin John, Director\",\"officer_role\":\"director\",\"appointed_on\":\"2021-01-01\",\"address\":{\"locality\":\"Southampton\",\"postal_code\":\"SO16 0BT\",\"premises\":\"Adanac Business Park,\",\"address_line_1\":\"Adanac North, Unit E3 & E4,\",\"country\":\"United Kingdom\"}},{\"name\":\"KOCHHAR, Dhruv Neeraj\",\"officer_role\":\"director\",\"appointed_on\":\"2020-11-09\",\"address\":{\"locality\":\"Southampton\",\"postal_code\":\"SO16 0BT\",\"premises\":\"Adanac Business Park,\",\"address_line_1\":\"Adanac North, Unit E3 & E4,\",\"country\":\"United Kingdom\"}}]},{\"company_number\":\"09158624\",\"company_type\":\"ltd\",\"title\":\"BBC COMEDY PRODUCTIONS LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2014-08-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":null,\"address_line_1\":\"1 Television Centre\",\"country\":\"United Kingdom\"},\"officers\":[{\"name\":\"CORRIETTE, Anthony\",\"officer_role\":\"secretary\",\"appointed_on\":\"2024-09-26\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1 Television Centre\",\"address_line_1\":\"101 Wood Lane\",\"country\":\"United Kingdom\"}},{\"name\":\"ESCOTT, Sarah\",\"officer_role\":\"director\",\"appointed_on\":\"2024-03-28\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1 Television Centre\",\"address_line_1\":\"101 Wood Lane\",\"country\":\"United Kingdom\"}},{\"name\":\"MELLORS, Holly\",\"officer_role\":\"director\",\"appointed_on\":\"2023-02-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1 Television Centre\",\"address_line_1\":\"101 Wood Lane\",\"country\":\"United Kingdom\"}}]},{\"company_number\":\"04463534\",\"company_type\":\"ltd\",\"title\":\"BBC COMMERCIAL LIMITED\",\"company_status\":\"active\",\"date_of_creation\":\"2002-06-18\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":null,\"address_line_1\":\"1 Television Centre\",\"country\":\"United Kingdom\"},\"officers\":[{\"name\":\"CORRIETTE, Anthony\",\"officer_role\":\"secretary\",\"appointed_on\":\"2022-04-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1 Television Centre\",\"address_line_1\":\"101 Wood Lane\",\"country\":\"United Kingdom\"}},{\"name\":\"BHOW, Gunjan Dhanesh\",\"officer_role\":\"director\",\"appointed_on\":\"2022-04-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1\",\"address_line_1\":\"Television Centre\",\"country\":\"United Kingdom\"}},{\"name\":\"BUFFINI, Damon Marcus, Sir\",\"officer_role\":\"director\",\"appointed_on\":\"2022-04-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1\",\"address_line_1\":\"Television Centre\",\"country\":\"United Kingdom\"}},{\"name\":\"FUSSELL, Thomas Cyrus\",\"officer_role\":\"director\",\"appointed_on\":\"2017-09-18\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1 Television Centre\",\"address_line_1\":\"101 Wood Lane\",\"country\":\"United Kingdom\"}},{\"name\":\"FYFIELD, Rowenna Mai\",\"officer_role\":\"director\",\"appointed_on\":\"2019-07-18\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1\",\"address_line_1\":\"Television Centre\",\"country\":\"United Kingdom\"}},{\"name\":\"GRIFFITHS, Ian Ward\",\"officer_role\":\"director\",\"appointed_on\":\"2023-04-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1\",\"address_line_1\":\"Television Centre\",\"country\":\"United Kingdom\"}},{\"name\":\"HUNGATE, Claire\",\"officer_role\":\"director\",\"appointed_on\":\"2023-04-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1\",\"address_line_1\":\"Television Centre\",\"country\":\"United Kingdom\"}},{\"name\":\"NEWMAN, Gary Stephen\",\"officer_role\":\"director\",\"appointed_on\":\"2023-04-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1\",\"address_line_1\":\"Television Centre\",\"country\":\"United Kingdom\"}},{\"name\":\"SINGH, Bhavneet\",\"officer_role\":\"director\",\"appointed_on\":\"2022-04-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1\",\"address_line_1\":\"Television Centre\",\"country\":\"United Kingdom\"}},{\"name\":\"SOLDI, Marinella\",\"officer_role\":\"director\",\"appointed_on\":\"2024-09-01\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1\",\"address_line_1\":\"Television Centre\",\"country\":\"United Kingdom\"}},{\"name\":\"TAVAZIVA, Anne Leigh\",\"officer_role\":\"director\",\"appointed_on\":\"2021-03-25\",\"address\":{\"locality\":\"London\",\"postal_code\":\"W12 7FA\",\"premises\":\"1\",\"address_line_1\":\"Television Centre\",\"country\":\"United Kingdom\"}}]},{\"company_number\":\"13637184\",\"company_type\":\"ltd\",\"title\":\"BBC CONCRETE PRODUCTS LTD\",\"company_status\":\"active\",\"date_of_creation\":\"2021-09-22\",\"address\":{\"locality\":\"Dewsbury\",\"postal_code\":\"WF12 9QB\",\"premises\":null,\"address_line_1\":\"Cartwright Mill\",\"country\":\"England\"},\"officers\":[{\"name\":\"HAFEEZ, Abdul\",\"officer_role\":\"director\",\"appointed_on\":\"2021-09-22\",\"address\":{\"locality\":\"Dewsbury\",\"postal_code\":\"WF12 9QB\",\"premises\":\"Cartwright Mill\",\"address_line_1\":\"Watergate Road\",\"country\":\"England\"}}]}]}";
    private static final String EXPECTED_RESPONSE_JSON_FOR_BAD_REQUEST_MISSING_SEARCH_TERM = "{\"errors\":[\"At least one of companyNumber or companyName is required\"]}";

    @Value("${api.key}")
    private String apiKey;

    @Autowired
    private TestRestTemplate template;

    @Test
    public void searchShouldReturnSuccessStatusCodeAndCorrectJsonForCompanyNumberSearchTerm() {
        searchShouldReturnSuccessStatusCodeAndCorrectJsonForValidSearchRequestBody(REQUEST_BODY_COMPANY_NUMBER, false, EXPECTED_RESPONSE_JSON_FOR_COMPANY_NUMBER_SEARCH_TERM);
    }

    @Test
    public void searchShouldReturnSuccessStatusCodeAndCorrectJsonForCompanyNameSearchTermAndActiveOnlyFalse() {
        searchShouldReturnSuccessStatusCodeAndCorrectJsonForValidSearchRequestBody(REQUEST_BODY_COMPANY_NAME, false, EXPECTED_RESPONSE_JSON_FOR_COMPANY_NAME_SEARCH_TERM_ACTIVE_ONLY_FALSE);
    }

    @Test
    public void searchShouldReturnSuccessStatusCodeAndCorrectJsonForCompanyNameSearchTermAndActiveOnlyTrue() {
        searchShouldReturnSuccessStatusCodeAndCorrectJsonForValidSearchRequestBody(REQUEST_BODY_COMPANY_NAME, true, EXPECTED_RESPONSE_JSON_FOR_COMPANY_NAME_SEARCH_TERM_ACTIVE_ONLY_TRUE);
    }

    private void searchShouldReturnSuccessStatusCodeAndCorrectJsonForValidSearchRequestBody(String requestBody, boolean activeOnly, String expectedResponseJson) {
        ResponseEntity<String> response = template.postForEntity("/search?activeOnly="+activeOnly, createRequest(requestBody), String.class);

        assertThat(response.getStatusCode().is2xxSuccessful()).isTrue();
        assertThat(response.getBody()).isEqualTo(expectedResponseJson);
    }

    @Test
    public void searchShouldReturnBadRequestStatusCodeForInvalidSearchRequestBody() {
        ResponseEntity<String> response = template.postForEntity("/search", createRequest(REQUEST_BODY_MISSING_SEARCH_TERM), String.class);

        assertThat(response.getStatusCode().is4xxClientError()).isTrue();
        assertThat(response.getBody()).isEqualTo(EXPECTED_RESPONSE_JSON_FOR_BAD_REQUEST_MISSING_SEARCH_TERM);

    }

    private HttpEntity<String> createRequest(String requestBody) {
        HttpHeaders headers = new HttpHeaders();
        headers.setContentType(MediaType.APPLICATION_JSON);
        headers.setAccept(List.of(MediaType.APPLICATION_JSON));
        headers.add("x-api-key", apiKey);
        return new HttpEntity<>(requestBody, headers);
    }

}
